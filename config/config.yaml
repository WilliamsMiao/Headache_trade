# Headache Trade 配置文件
# 支持环境变量替换: ${ENV_VAR} 或 ${ENV_VAR:default_value}

# 交易所配置
exchange:
  name: binance
  api_key: ${EXCHANGE_API_KEY:YOUR_API_KEY}
  api_secret: ${EXCHANGE_API_SECRET:YOUR_API_SECRET}
  testnet: false
  timeout: 10
  enable_rate_limit: true
  proxy: null

# 交易配置
trading:
  symbol: BTC/USDT:USDT
  timeframe: 15m
  max_position_pct: 0.8      # 最大仓位百分比
  min_position_pct: 0.1      # 最小仓位百分比
  default_leverage: 2        # 默认杠杆倍数
  min_confidence: 60         # 最小信心度阈值
  check_interval: 300        # 检查间隔(秒)

# AI配置
ai:
  enabled: true
  provider: deepseek
  api_key: ${DEEPSEEK_API_KEY:YOUR_DEEPSEEK_API_KEY}
  api_base_url: https://api.deepseek.com
  model: deepseek-chat
  timeout: 30
  max_retries: 3
  ai_weight: 0.6             # AI决策权重
  technical_weight: 0.4      # 技术分析权重

# 风险管理配置
risk_management:
  base_risk_pct: 0.01        # 基础风险百分比
  max_risk_pct: 0.02         # 最大风险百分比
  max_position_per_strategy: 0.5  # 单策略最大仓位
  max_total_risk: 0.02       # 总风险上限
  min_account_balance: 100   # 最低账户余额
  min_risk_reward_ratio: 1.5 # 最小风险回报比
  trailing_stop_activation: 0.5  # 移动止损激活点
  trailing_stop_distance: 0.3    # 移动止损距离

# 策略调度器配置
scheduler:
  min_switch_interval_hours: 6      # 最小切换间隔(小时)
  min_confidence_for_switch: 60     # 切换最小信心度
  use_ai: true                      # 是否使用AI辅助决策
  enable_auto_switch: true          # 启用自动切换

# 策略配置
strategies:
  # 动量策略
  momentum:
    enabled: true
    rsi_period: 14
    rsi_overbought: 70
    rsi_oversold: 30
    momentum_threshold: 0.02
    volume_multiplier: 1.5
    
  # 均值回归策略
  mean_reversion:
    enabled: true
    rsi_oversold: 30
    rsi_overbought: 70
    bb_period: 20
    bb_std: 2.0
    atr_period: 14
    
  # 突破策略
  breakout:
    enabled: true
    donchian_period: 20
    volume_threshold: 1.5
    volatility_threshold: 0.015
    
  # 趋势跟踪策略
  trend_following:
    enabled: true
    donchian_entry_period: 20
    donchian_exit_period: 10
    ema_fast: 12
    ema_slow: 26
    adx_period: 14
    adx_threshold: 25
    max_pyramid_adds: 3
    pyramid_interval_atr: 0.5
    risk_per_trade: 0.01
    
  # 网格策略
  grid:
    enabled: true
    grid_count: 10
    grid_spacing_pct: 0.01
    risk_per_grid: 0.003
    price_range_pct: 0.1

# 技术指标配置
indicators:
  atr_period: 14
  rsi_period: 14
  macd_fast: 12
  macd_slow: 26
  macd_signal: 9
  bb_period: 20
  bb_std: 2
  ema_periods: [12, 26, 50, 200]
  adx_period: 14

# API配置
api:
  deepseek_timeout: 30
  exchange_timeout: 10
  sentiment_api_timeout: 10
  max_retries: 3
  retry_delay: 1

# 性能配置
performance:
  enable_cache: true
  cache_ttl: 60              # 缓存生存时间(秒)
  use_async_api: false       # 使用异步API
  dashboard_update_interval: 5  # 仪表板更新间隔(秒)
  max_workers: 4             # 最大工作线程数

# 日志配置
logging:
  level: INFO                # 日志级别: DEBUG, INFO, WARNING, ERROR, CRITICAL
  console_level: INFO        # 控制台日志级别
  file_level: DEBUG          # 文件日志级别
  log_dir: logs              # 日志目录
  rotation: "00:00"          # 日志轮转时间
  retention: "30 days"       # 日志保留时间
  format: "{time:YYYY-MM-DD HH:mm:ss} | {level: <8} | {name}:{function}:{line} - {message}"
  backtrace: true
  diagnose: true

# 通知配置
notifications:
  enabled: false
  dingding:
    enabled: false
    webhook_url: ${DINGDING_WEBHOOK:}
    secret: ${DINGDING_SECRET:}
  telegram:
    enabled: false
    bot_token: ${TELEGRAM_BOT_TOKEN:}
    chat_id: ${TELEGRAM_CHAT_ID:}

# 数据库配置
database:
  enabled: false
  type: sqlite               # sqlite, mysql, postgresql
  path: data/trading.db      # SQLite路径
  host: localhost
  port: 5432
  username: ${DB_USER:}
  password: ${DB_PASSWORD:}
  database: headache_trade

# Web界面配置
web:
  enabled: true
  host: 0.0.0.0
  port: 8050
  debug: false
  auth_required: false
  username: ${WEB_USERNAME:admin}
  password: ${WEB_PASSWORD:admin}

# 回测配置
backtest:
  initial_capital: 10000
  commission_rate: 0.001     # 手续费率
  slippage_rate: 0.0005      # 滑点率
  enable_margin: true        # 启用保证金交易
  enable_short: true         # 启用做空

# 开发配置
development:
  debug_mode: false
  mock_exchange: false       # 模拟交易所
  save_signals: true         # 保存交易信号
  save_trades: true          # 保存交易记录
