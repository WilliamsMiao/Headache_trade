# ğŸ¨ éª¨æ¶å¸ƒå±€ç³»ç»Ÿ (Skeleton Layout System)

> ä¸º Headache Trade AIäº¤æ˜“ä»ªè¡¨æ¿å®ç°çš„å®Œæ•´éª¨æ¶å¸ƒå±€ç³»ç»Ÿ

## âœ¨ æ ¸å¿ƒç‰¹æ€§

âœ… **å¸ƒå±€ä¼˜å…ˆè®¾è®¡** - éª¨æ¶ä¸çœŸå®ç»„ä»¶å¸ƒå±€å®Œå…¨ä¸€è‡´ï¼Œåˆ‡æ¢æ— è·³åŠ¨  
âœ… **1:1 ç»“æ„æ˜ å°„** - æ¯ä¸ªéª¨æ¶ç»„ä»¶å¯¹åº”ä¸€ä¸ªçœŸå®ç»„ä»¶  
âœ… **å“åº”å¼å¸ƒå±€** - æ”¯æŒç§»åŠ¨ç«¯ã€å¹³æ¿ã€ç¬”è®°æœ¬ã€æ¡Œé¢å…¨æ–­ç‚¹  
âœ… **è§†è§‰åé¦ˆ** - è„‰å†²åŠ¨ç”» + é—ªçƒæ•ˆæœï¼Œå¢å¼ºåŠ è½½æ„ŸçŸ¥  
âœ… **æ¨¡å—åŒ–è®¾è®¡** - å¯ç‹¬ç«‹ä½¿ç”¨ä»»ä½•éª¨æ¶ç»„ä»¶  
âœ… **é›¶æ€§èƒ½å¼€é”€** - çº¯å±•ç¤ºç»„ä»¶ï¼Œæ— çŠ¶æ€ï¼Œæ— å‰¯ä½œç”¨  

## ğŸ“¦ åŒ…å«çš„éª¨æ¶ç»„ä»¶

| ç»„ä»¶å | å¯¹åº”çœŸå®ç»„ä»¶ | è¯´æ˜ |
|-------|------------|------|
| `DashboardHeaderSkeleton` | Header | é¡¶éƒ¨æ ï¼ˆæ ‡é¢˜ã€çŠ¶æ€ã€æƒç›Šï¼‰ |
| `SummaryCardsSkeleton` | ModelSummaryCard | æ¨¡å‹æ‘˜è¦å¡ç‰‡ |
| `CryptoTickerSkeleton` | CryptoTickerBar | åŠ å¯†è´§å¸ä»·æ ¼æ¡ |
| `StatCardsSkeleton` | StatCards | ç»Ÿè®¡å¡ç‰‡ç½‘æ ¼ |
| `AccountEquityChartSkeleton` | AccountEquityChart | è´¦æˆ·ä»·å€¼å›¾ |
| `PerpKlineWithOrdersSkeleton` | PerpKlineWithOrders | æ°¸ç»­åˆçº¦Kçº¿å›¾ |
| `PositionsTableSkeleton` | PositionsPanel | æŒä»“é¢æ¿ |
| `RecentTradesTableSkeleton` | RecentTradesTable | æˆäº¤è®°å½•è¡¨æ ¼ |
| `DashboardPageSkeleton` | æ•´ä¸ªé¡µé¢ | é¡µé¢çº§éª¨æ¶ç»„åˆ |

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. æŸ¥çœ‹æ¼”ç¤º

å¯åŠ¨å¼€å‘æœåŠ¡å™¨åï¼Œè®¿é—®æ¼”ç¤ºé¡µé¢ï¼š

```bash
# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
cd frontend_dashboard
npm run dev

# è®¿é—®æ¼”ç¤ºé¡µé¢
# http://localhost:3000/skeleton-demo
```

æ¼”ç¤ºé¡µé¢æä¾›ä¸¤ç§è§†å›¾ï¼š
- **å®Œæ•´é¡µé¢**ï¼šæŸ¥çœ‹æ•´ä¸ªä»ªè¡¨ç›˜çš„éª¨æ¶æ•ˆæœ
- **åˆ†ç»„ä»¶**ï¼šæŸ¥çœ‹æ¯ä¸ªåŒºåŸŸçš„éª¨æ¶ç»„ä»¶

### 2. åœ¨é¡µé¢ä¸­ä½¿ç”¨

```tsx
import { DashboardPageSkeleton } from '@/components/dashboard/skeletons';

export default function DashboardPage() {
  const { data, isLoading } = useQuery(['dashboard'], getDashboard);

  if (isLoading) {
    return <DashboardPageSkeleton />; // æ˜¾ç¤ºå®Œæ•´éª¨æ¶
  }

  return <DashboardContent data={data} />; // æ˜¾ç¤ºçœŸå®å†…å®¹
}
```

### 3. åœ¨ç»„ä»¶ä¸­ä½¿ç”¨

```tsx
import { AccountEquityChartSkeleton } from '@/components/dashboard/skeletons';

export function AccountEquityChart() {
  const { data, isLoading } = useQuery(['equity'], getEquity);

  if (isLoading) {
    return <AccountEquityChartSkeleton />;
  }

  return <Chart data={data} />;
}
```

## ğŸ“ å¸ƒå±€ç»“æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Header (DashboardHeaderSkeleton)                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Model Card   â”‚  Crypto Ticker (CryptoTickerSkeleton)        â”‚
â”‚ (Summary     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Cards        â”‚  Stat Cards (StatCardsSkeleton)              â”‚
â”‚ Skeleton)    â”‚  [Win Rate] [Max DD] [Sharpe] [Trades]      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Account Equity Chart           â”‚ Perp Kline Chart           â”‚
â”‚ (AccountEquityChartSkeleton)   â”‚ (PerpKlineWithOrders...)   â”‚
â”‚                                â”‚                            â”‚
â”‚         500px é«˜               â”‚       500px é«˜             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Positions Table                â”‚ Recent Trades Table        â”‚
â”‚ (PositionsTableSkeleton)       â”‚ (RecentTradesTable...)     â”‚
â”‚                                â”‚                            â”‚
â”‚        æœ€å° 400px              â”‚      æœ€å° 400px            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¨ è§†è§‰è®¾è®¡

### è‰²å½©æ–¹æ¡ˆ

```css
èƒŒæ™¯è‰²ï¼š  bg-slate-900         /* å¡ç‰‡èƒŒæ™¯ */
è¾¹æ¡†è‰²ï¼š  border-slate-800     /* å¡ç‰‡è¾¹æ¡† */
å ä½æ¡ï¼š  bg-slate-800/50      /* éª¨æ¶å ä½ */
é—ªçƒæ•ˆæœï¼švia-slate-700/20     /* é—ªçƒä¸­é—´è‰² */
```

### åŠ¨ç”»æ•ˆæœ

- **è„‰å†²åŠ¨ç”»**ï¼š`animate-pulse`ï¼ˆå†…ç½®ï¼‰
- **é—ªçƒæ•ˆæœ**ï¼š`animate-shimmer`ï¼ˆè‡ªå®šä¹‰ï¼Œ2ç§’ä¸€æ¬¡ï¼‰

### ç‰¹è‰²åŠŸèƒ½

- **æ¨¡æ‹ŸKçº¿å›¾**ï¼š20æ ¹èœ¡çƒ›å›¾å ä½ï¼Œå¸¦ä¸Šä¸‹å½±çº¿
- **ç½‘æ ¼è£…é¥°**ï¼šå›¾è¡¨åŒºåŸŸå¸¦æ¨ªçºµç½‘æ ¼çº¿
- **å“åº”å¼ä¾§è¾¹æ **ï¼šKçº¿å›¾å³ä¾§ä¿¡æ¯é¢æ¿ä»…åœ¨å¤§å±æ˜¾ç¤º

## ğŸ“± å“åº”å¼æ–­ç‚¹

| æ–­ç‚¹ | å±å¹•å®½åº¦ | å¸ƒå±€å˜åŒ– |
|------|---------|---------|
| é»˜è®¤ï¼ˆç§»åŠ¨ç«¯ï¼‰| < 768px | å•åˆ—å¸ƒå±€ |
| `md:` | â‰¥ 768px | ç»Ÿè®¡å¡ç‰‡å˜ä¸º 4 åˆ— |
| `lg:` | â‰¥ 1024px | é¡¶éƒ¨ä¿¡æ¯åŒº 3:9 åˆ†åˆ— |
| `xl:` | â‰¥ 1280px | å›¾è¡¨åŒº 8:4 åˆ†åˆ—ï¼ŒKçº¿å›¾æ˜¾ç¤ºä¾§è¾¹æ  |

## ğŸ“š æ–‡æ¡£

### è¯¦ç»†æ–‡æ¡£

- **[å®Œæ•´ä½¿ç”¨æŒ‡å—](./SKELETON_LAYOUT_GUIDE.md)** - è¯¦ç»†çš„ç»„ä»¶è¯´æ˜ã€ä½¿ç”¨æ–¹æ³•ã€æ‰©å±•æŒ‡å—
- **[å¿«é€Ÿå‚è€ƒæ‰‹å†Œ](./SKELETON_QUICK_REFERENCE.md)** - é€ŸæŸ¥è¡¨ã€å¯¹åº”å…³ç³»ã€ç»´æŠ¤æ¸…å•
- **[å®æ–½æ€»ç»“](./SKELETON_IMPLEMENTATION_SUMMARY.md)** - å®æ–½è¿‡ç¨‹ã€æŠ€æœ¯ç»†èŠ‚ã€æ€§èƒ½æŒ‡æ ‡

### åœ¨çº¿æ¼”ç¤º

è®¿é—® `/skeleton-demo` é¡µé¢æŸ¥çœ‹æ‰€æœ‰éª¨æ¶ç»„ä»¶çš„å®é™…æ•ˆæœ

## ğŸ› ï¸ æ‰©å±•å’Œç»´æŠ¤

### æ·»åŠ æ–°çš„éª¨æ¶ç»„ä»¶

1. åœ¨ `components/dashboard/skeletons/` åˆ›å»ºæ–°æ–‡ä»¶
2. å¯¼å…¥åŸºç¡€ç»„ä»¶ï¼š`SkeletonBox`, `SkeletonText`, `SkeletonCircle`
3. ç¡®ä¿å¤–å±‚å¸ƒå±€ä¸çœŸå®ç»„ä»¶å®Œå…¨ä¸€è‡´
4. åœ¨ `index.tsx` ä¸­å¯¼å‡º
5. åœ¨ `DashboardPageSkeleton.tsx` ä¸­é›†æˆï¼ˆå¦‚æœæ˜¯é¡µé¢çº§ç»„ä»¶ï¼‰

### è°ƒæ•´ç°æœ‰éª¨æ¶

1. æ‰“å¼€å¯¹åº”çš„éª¨æ¶ç»„ä»¶æ–‡ä»¶
2. ä¿®æ”¹ `SkeletonText` å’Œ `SkeletonBox` çš„å®½åº¦å’Œé«˜åº¦
3. **ä¸è¦æ”¹å˜**å¤–å±‚å®¹å™¨çš„å¸ƒå±€å±æ€§ï¼ˆgridã€flexã€gapç­‰ï¼‰
4. åœ¨ `/skeleton-demo` ä¸­æ£€æŸ¥æ•ˆæœ

### åŒæ­¥çœŸå®ç»„ä»¶æ›´æ–°

å½“çœŸå®ç»„ä»¶çš„å¸ƒå±€æ”¹å˜æ—¶ï¼š

```bash
# æ£€æŸ¥æ¸…å•
â–¡ æ›´æ–°å¯¹åº”éª¨æ¶ç»„ä»¶çš„å¸ƒå±€å±æ€§
â–¡ åŒæ­¥ min-h, h, grid-cols, gap, col-span ç­‰
â–¡ æµ‹è¯•åˆ‡æ¢æ—¶æ˜¯å¦æœ‰è·³åŠ¨
â–¡ æ›´æ–°ç›¸å…³æ–‡æ¡£
```

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

| æŒ‡æ ‡ | å€¼ | è¯´æ˜ |
|-----|-----|-----|
| é¦–å±æ¸²æŸ“æ—¶é—´ | < 100ms | éª¨æ¶ç«‹å³æ¸²æŸ“ |
| å¸ƒå±€è·³åŠ¨ (CLS) | 0 | å¸ƒå±€å®Œå…¨ä¸€è‡´ |
| åˆ‡æ¢æ—¶é—´ | < 16ms | å°äº1å¸§ |
| ç»„ä»¶æ€»å¤§å° | ~8KB | å·²å‹ç¼© |

## ğŸ¯ è®¾è®¡åŸåˆ™

### 1. å¸ƒå±€ä¼˜å…ˆï¼ˆLayout-Firstï¼‰

éª¨æ¶ç»„ä»¶çš„å¤–å±‚å®¹å™¨ä¸çœŸå®ç»„ä»¶**å®Œå…¨ä¸€è‡´**ï¼š

```tsx
// âœ… æ­£ç¡®ï¼šå¤–å±‚å¸ƒå±€å®Œå…¨åŒ¹é…
<div className="bg-slate-900 border border-slate-800 rounded-xl p-6 h-[500px]">
  {/* å†…å±‚éª¨æ¶å ä½ */}
</div>

// âŒ é”™è¯¯ï¼šé«˜åº¦ä¸ä¸€è‡´
<div className="bg-slate-900 rounded-xl p-4"> {/* ç¼ºå°‘å›ºå®šé«˜åº¦ */}
  {/* å†…å±‚éª¨æ¶å ä½ */}
</div>
```

### 2. ç»“æ„æ˜ å°„ï¼ˆ1:1 Mappingï¼‰

æ¯ä¸ªéª¨æ¶ç»„ä»¶å¯¹åº”ä¸€ä¸ªçœŸå®ç»„ä»¶ï¼Œç»“æ„ä¸€ä¸€å¯¹åº”ï¼š

```
çœŸå®ç»„ä»¶              éª¨æ¶ç»„ä»¶
AccountEquityChart â†’ AccountEquityChartSkeleton
PerpKlineWithOrders â†’ PerpKlineWithOrdersSkeleton
PositionsPanel     â†’ PositionsTableSkeleton
```

### 3. è§†è§‰å ä½ï¼ˆVisual Placeholderï¼‰

å†…å±‚åªåšè§†è§‰å ä½ï¼Œä¸å½±å“å¸ƒå±€ï¼š

```tsx
// ä½¿ç”¨åŸºç¡€ç»„ä»¶æ„å»ºè§†è§‰å ä½
<SkeletonText className="w-32 h-6" />  {/* æ ‡é¢˜ */}
<SkeletonBox className="h-[300px]" />  {/* å†…å®¹åŒº */}
<SkeletonCircle className="w-8 h-8" /> {/* å›¾æ ‡ */}
```

## ğŸ” è°ƒè¯•æŠ€å·§

### æ£€æŸ¥å¸ƒå±€ä¸€è‡´æ€§

ä¸´æ—¶æ·»åŠ è¾¹æ¡†ï¼Œå¯¹æ¯”éª¨æ¶å’ŒçœŸå®å†…å®¹ï¼š

```tsx
// éª¨æ¶ç»„ä»¶
<div className="border-2 border-red-500 ...">

// çœŸå®ç»„ä»¶
<div className="border-2 border-green-500 ...">
```

### å¼ºåˆ¶æ˜¾ç¤ºéª¨æ¶

ç”¨äºæµ‹è¯•å’Œè°ƒæ•´ï¼š

```tsx
if (true) { // åŸ: if (isLoading)
  return <DashboardPageSkeleton />;
}
```

### æµ‹é‡æ€§èƒ½

```tsx
console.time('skeleton-render');
const skeleton = <DashboardPageSkeleton />;
console.timeEnd('skeleton-render');
```

## ğŸ¤ è´¡çŒ®

åœ¨æ·»åŠ æ–°åŠŸèƒ½æˆ–ä¿®æ”¹ç°æœ‰ç»„ä»¶æ—¶ï¼Œè¯·ç¡®ä¿ï¼š

- [ ] æ–°å¢çœŸå®ç»„ä»¶æ—¶ï¼ŒåŒæ­¥åˆ›å»ºå¯¹åº”çš„éª¨æ¶ç»„ä»¶
- [ ] éª¨æ¶ç»„ä»¶å¸ƒå±€ä¸çœŸå®ç»„ä»¶å®Œå…¨ä¸€è‡´
- [ ] æµ‹è¯•ä¸åŒå±å¹•å°ºå¯¸ä¸‹çš„å“åº”å¼æ•ˆæœ
- [ ] éªŒè¯åˆ‡æ¢æ—¶æ— å¸ƒå±€è·³åŠ¨
- [ ] æ›´æ–°ç›¸å…³æ–‡æ¡£

## ğŸ“ ç›¸å…³èµ„æº

- [Next.js æ–‡æ¡£](https://nextjs.org/docs)
- [Tailwind CSS åŠ¨ç”»](https://tailwindcss.com/docs/animation)
- [React Query Loading States](https://tanstack.com/query/latest/docs/react/guides/initial-query-data)

---

**ç‰ˆæœ¬**ï¼š1.0.0  
**æœ€åæ›´æ–°**ï¼š2026-01-14  
**çŠ¶æ€**ï¼šâœ… ç”Ÿäº§å°±ç»ªï¼ˆProduction Readyï¼‰
