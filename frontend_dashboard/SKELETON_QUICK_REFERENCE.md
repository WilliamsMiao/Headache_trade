# éª¨æ¶å¸ƒå±€ç³»ç»Ÿ - å¿«é€Ÿå‚è€ƒ

## é¡µé¢ç»“æ„æ€»è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Header (é¡¶éƒ¨æ )                                            â”‚
â”‚  [Logo] Headache Trade    [Model] [Equity] [PnL] [Actions] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              â”‚  Crypto Ticker (ä»·æ ¼æ¡)                      â”‚
â”‚  Model Card  â”‚  [BTC] [ETH] [SOL] [BNB] [ADA] [DOT]        â”‚
â”‚              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  (3/12åˆ—)    â”‚  Stat Cards (ç»Ÿè®¡å¡ç‰‡)                       â”‚
â”‚              â”‚  [Win Rate] [Max DD] [Sharpe] [Trades]      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                â”‚                            â”‚
â”‚  Account Equity Chart          â”‚  Perp Kline Chart          â”‚
â”‚  (è´¦æˆ·ä»·å€¼å›¾)                   â”‚  (æ°¸ç»­åˆçº¦Kçº¿)              â”‚
â”‚                                â”‚                            â”‚
â”‚  [æ—¶é—´ç²’åº¦æŒ‰é’®]                 â”‚  [å¸ç§é€‰æ‹©] [æ—¶é—´ç²’åº¦]      â”‚
â”‚  [å›¾è¡¨åŒºåŸŸ - 500pxé«˜]           â”‚  [Kçº¿å›¾åŒºåŸŸ - 500pxé«˜]      â”‚
â”‚                                â”‚  [è®¢å•ä¿¡æ¯é¢æ¿]             â”‚
â”‚                                â”‚                            â”‚
â”‚  (8/12åˆ—)                      â”‚  (4/12åˆ—)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                â”‚                            â”‚
â”‚  Positions Panel               â”‚  Recent Trades Table       â”‚
â”‚  (æŒä»“é¢æ¿)                     â”‚  (è¿‘æœŸæˆäº¤)                 â”‚
â”‚                                â”‚                            â”‚
â”‚  [æŒä»“å¡ç‰‡ 1]                   â”‚  [è¡¨å¤´: Time|Symbol|...]   â”‚
â”‚  [æŒä»“å¡ç‰‡ 2]                   â”‚  [è®°å½•è¡Œ 1]                â”‚
â”‚  [æŒä»“å¡ç‰‡ 3]                   â”‚  [è®°å½•è¡Œ 2]                â”‚
â”‚                                â”‚  [è®°å½•è¡Œ 3]                â”‚
â”‚  (æœ€å° 400pxé«˜)                â”‚  ...                       â”‚
â”‚                                â”‚  [è®°å½•è¡Œ 8]                â”‚
â”‚                                â”‚                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ä½¿ç”¨åœºæ™¯

### åœºæ™¯ 1: é¦–æ¬¡åŠ è½½é¡µé¢
```tsx
// page.tsx
const { data, isLoading } = useQuery(['dashboard'], getDashboard);

if (isLoading) {
  return <DashboardPageSkeleton />; // æ˜¾ç¤ºå®Œæ•´éª¨æ¶
}

return <DashboardContent data={data} />; // æ˜¾ç¤ºçœŸå®å†…å®¹
```

**æ•ˆæœ**ï¼šç”¨æˆ·ç«‹å³çœ‹åˆ°å®Œæ•´çš„é¡µé¢ç»“æ„ï¼Œæ‰€æœ‰å¡ç‰‡å’Œå›¾è¡¨å ä½éƒ½å·²å°±ç»ª

### åœºæ™¯ 2: å•ä¸ªç»„ä»¶åŠ è½½
```tsx
// CryptoTickerBar.tsx
const { data, isLoading } = useQuery(['prices'], getPrices);

if (isLoading) {
  return <CryptoTickerSkeleton />; // åªæ˜¾ç¤ºä»·æ ¼æ¡éª¨æ¶
}

return <CryptoTicker prices={data} />; // æ˜¾ç¤ºçœŸå®ä»·æ ¼
```

**æ•ˆæœ**ï¼šé¡µé¢å…¶ä»–éƒ¨åˆ†æ­£å¸¸æ˜¾ç¤ºï¼Œåªæœ‰ä»·æ ¼æ¡æ˜¾ç¤ºéª¨æ¶å ä½

### åœºæ™¯ 3: æ•°æ®åˆ·æ–°
```tsx
// é…ç½® refetchInterval æ—¶ï¼Œå¯ä»¥é€‰æ‹©ä¸æ˜¾ç¤ºéª¨æ¶
const { data, isLoading, isFetching } = useQuery({
  queryKey: ['dashboard'],
  queryFn: getDashboard,
  refetchInterval: 5000,
});

// é¦–æ¬¡åŠ è½½æ˜¾ç¤ºéª¨æ¶ï¼Œåç»­åˆ·æ–°ä¸æ˜¾ç¤º
if (isLoading) {
  return <DashboardPageSkeleton />;
}

return (
  <div>
    {isFetching && <LoadingIndicator />} {/* å¯é€‰çš„åˆ·æ–°æŒ‡ç¤ºå™¨ */}
    <DashboardContent data={data} />
  </div>
);
```

## éª¨æ¶ç»„ä»¶å¯¹åº”è¡¨

| é¡µé¢åŒºåŸŸ | éª¨æ¶ç»„ä»¶ | çœŸå®ç»„ä»¶ | å…³é”®å¸ƒå±€å±æ€§ |
|---------|---------|---------|------------|
| ğŸ” é¡¶éƒ¨æ  | `DashboardHeaderSkeleton` | `Header` | `sticky top-0` |
| ğŸ“Š æ¨¡å‹å¡ | `SummaryCardsSkeleton` | `ModelSummaryCard` | `lg:col-span-3 min-h-[200px]` |
| ğŸ’° ä»·æ ¼æ¡ | `CryptoTickerSkeleton` | `CryptoTickerBar` | `h-[66px]` |
| ğŸ“ˆ ç»Ÿè®¡å¡ | `StatCardsSkeleton` | StatCards | `grid-cols-2 md:grid-cols-4 h-[74px]` |
| ğŸ“‰ æƒç›Šå›¾ | `AccountEquityChartSkeleton` | `AccountEquityChart` | `xl:col-span-8 h-[500px]` |
| ğŸ•¯ï¸ Kçº¿å›¾ | `PerpKlineWithOrdersSkeleton` | `PerpKlineWithOrders` | `xl:col-span-4 h-[500px]` |
| ğŸ“¦ æŒä»“ | `PositionsTableSkeleton` | `PositionsPanel` | `min-h-[400px]` |
| ğŸ“‹ æˆäº¤ | `RecentTradesTableSkeleton` | `RecentTradesTable` | `min-h-[400px]` |

## å“åº”å¼æ–­ç‚¹

```css
/* ç§»åŠ¨ç«¯ (é»˜è®¤) */
- å•åˆ—å¸ƒå±€
- æ¨¡å‹å¡ã€ä»·æ ¼æ¡ã€ç»Ÿè®¡å¡ã€å›¾è¡¨å…¨å®½
- æŒä»“å’Œæˆäº¤è¡¨æ ¼ä¸Šä¸‹æ’åˆ—

/* å¹³æ¿ (md: 768px+) */
- ç»Ÿè®¡å¡å˜ä¸º 4 åˆ—
- å…¶ä»–ä¿æŒå•åˆ—

/* ç¬”è®°æœ¬ (lg: 1024px+) */
- é¡¶éƒ¨ä¿¡æ¯åŒºå¯ç”¨ 12 åˆ—ç½‘æ ¼
- æ¨¡å‹å¡å  3 åˆ—ï¼Œä»·æ ¼æ¡+ç»Ÿè®¡å  9 åˆ—

/* æ¡Œé¢ (xl: 1280px+) */
- ä¸»å›¾è¡¨åŒºå¯ç”¨ 12 åˆ—ç½‘æ ¼
- æƒç›Šå›¾å  8 åˆ—ï¼ŒKçº¿å›¾å  4 åˆ—
- Kçº¿å›¾å³ä¾§æ˜¾ç¤ºè®¢å•ä¿¡æ¯é¢æ¿
- åº•éƒ¨è¡¨æ ¼åŒºå¯ç”¨ 2 åˆ—ç½‘æ ¼
```

## æ€§èƒ½æŒ‡æ ‡

| æŒ‡æ ‡ | å€¼ |
|-----|-----|
| é¦–å±æ¸²æŸ“æ—¶é—´ | < 100ms |
| å¸ƒå±€è·³åŠ¨ (CLS) | 0 |
| éª¨æ¶åˆ‡æ¢æ—¶é—´ | < 16ms (1å¸§) |
| ç»„ä»¶å¤§å° | ~8KB (æ€»è®¡) |

## ç»´æŠ¤æ£€æŸ¥æ¸…å•

æ·»åŠ æ–°åŠŸèƒ½æ—¶ï¼Œè¯·ç¡®ä¿ï¼š

- [ ] æ–°çš„çœŸå®ç»„ä»¶æœ‰å¯¹åº”çš„éª¨æ¶ç»„ä»¶
- [ ] éª¨æ¶ç»„ä»¶å¤–å±‚å¸ƒå±€ä¸çœŸå®ç»„ä»¶å®Œå…¨ä¸€è‡´
- [ ] å“åº”å¼æ–­ç‚¹ (`md:`, `lg:`, `xl:`) ä¿æŒåŒæ­¥
- [ ] å›ºå®šé«˜åº¦ (`h-[xxx]`) æˆ–æœ€å°é«˜åº¦ (`min-h-[xxx]`) åŒ¹é…
- [ ] åœ¨ `DashboardPageSkeleton.tsx` ä¸­æ·»åŠ æ–°åŒºåŸŸ
- [ ] åœ¨ `index.tsx` ä¸­å¯¼å‡ºæ–°ç»„ä»¶
- [ ] æ›´æ–°æœ¬æ–‡æ¡£

## è°ƒè¯•æŠ€å·§

### æ£€æŸ¥å¸ƒå±€ä¸€è‡´æ€§
```tsx
// ä¸´æ—¶æ·»åŠ è¾¹æ¡†ï¼Œå¯¹æ¯”éª¨æ¶å’ŒçœŸå®å†…å®¹
<div className="border-2 border-red-500"> {/* éª¨æ¶ */}
<div className="border-2 border-green-500"> {/* çœŸå®å†…å®¹ */}
```

### å¼ºåˆ¶æ˜¾ç¤ºéª¨æ¶
```tsx
// ä¸´æ—¶ä¿®æ”¹æ¡ä»¶ï¼Œæ°¸ä¹…æ˜¾ç¤ºéª¨æ¶
if (true) { // åŸ: if (isLoading)
  return <DashboardPageSkeleton />;
}
```

### æµ‹é‡æ€§èƒ½
```tsx
console.time('skeleton-render');
const skeleton = <DashboardPageSkeleton />;
console.timeEnd('skeleton-render');
```

## ç¤ºä¾‹ï¼šæ·»åŠ æ–°çš„"æŒä»“åˆ†æ"å¡ç‰‡

1. **åˆ›å»ºéª¨æ¶ç»„ä»¶**
```tsx
// PositionAnalysisSkeleton.tsx
export function PositionAnalysisSkeleton() {
  return (
    <div className="bg-slate-900 border border-slate-800 rounded-xl p-6 h-[300px]">
      <SkeletonText className="w-40 h-6 mb-4" />
      <div className="space-y-3">
        {[1,2,3,4].map(i => (
          <SkeletonText key={i} className="w-full h-4" />
        ))}
      </div>
    </div>
  );
}
```

2. **åœ¨é¡µé¢éª¨æ¶ä¸­æ·»åŠ **
```tsx
// DashboardPageSkeleton.tsx
<div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
  <PositionsTableSkeleton />
  <PositionAnalysisSkeleton /> {/* æ–°å¢ */}
</div>
```

3. **åœ¨çœŸå®é¡µé¢ä¸­ä½¿ç”¨**
```tsx
// page.tsx
<div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
  <PositionsPanel />
  <PositionAnalysis /> {/* çœŸå®ç»„ä»¶ */}
</div>
```

## ç›¸å…³èµ„æº

- [å®Œæ•´ä½¿ç”¨æŒ‡å—](./SKELETON_LAYOUT_GUIDE.md)
- [Tailwind åŠ¨ç”»æ–‡æ¡£](https://tailwindcss.com/docs/animation)
- [React Query Loading States](https://tanstack.com/query/latest/docs/react/guides/initial-query-data)
