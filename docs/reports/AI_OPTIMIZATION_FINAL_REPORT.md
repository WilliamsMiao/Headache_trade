# AIå›æµ‹å‚æ•°ä¼˜åŒ–åŠŸèƒ½ - æœ€ç»ˆæµ‹è¯•æŠ¥å‘Š

## æµ‹è¯•æ—¶é—´
2026-01-20

## æµ‹è¯•ç¯å¢ƒ
- âœ… `.env` æ–‡ä»¶å·²æ­£ç¡®é…ç½®
- âœ… `.gitignore` å·²æ­£ç¡®é…ç½®ï¼ˆ.envæ–‡ä»¶ä¸ä¼šè¢«æäº¤ï¼‰
- âœ… DeepSeek APIå¯†é’¥å·²é…ç½®
- æ•°æ®å‘¨æœŸ: 15åˆ†é’ŸKçº¿
- æµ‹è¯•æ•°æ®: 7å¤©å†å²æ•°æ®ï¼ˆ672æ ¹Kçº¿ï¼‰

## æµ‹è¯•ç»“æœæ€»ç»“

### âœ… æ‰€æœ‰åŠŸèƒ½æµ‹è¯•é€šè¿‡ (6/6)

| åŠŸèƒ½ | ç­–ç•¥ | çŠ¶æ€ | è¯´æ˜ |
|------|------|------|------|
| **AIå‚æ•°å»ºè®®** | signal | âœ… é€šè¿‡ | æˆåŠŸè·å–5æ¡ä¼˜åŒ–å»ºè®® |
| **AIå‚æ•°å»ºè®®** | trend | âœ… é€šè¿‡ | æˆåŠŸè·å–5æ¡ä¼˜åŒ–å»ºè®® |
| **ç½‘æ ¼æœç´¢** | signal | âœ… é€šè¿‡ | æˆåŠŸæ‰¾åˆ°æœ€ä½³å‚æ•° |
| **ç½‘æ ¼æœç´¢** | trend | âœ… é€šè¿‡ | æˆåŠŸæ‰¾åˆ°æœ€ä½³å‚æ•° |
| **æ··åˆä¼˜åŒ–** | signal | âœ… é€šè¿‡ | AIå»ºè®® + ç½‘æ ¼æœç´¢æ­£å¸¸ |
| **æ··åˆä¼˜åŒ–** | trend | âœ… é€šè¿‡ | AIå»ºè®® + ç½‘æ ¼æœç´¢æ­£å¸¸ |

---

## è¯¦ç»†æµ‹è¯•ç»“æœ

### 1. Signalç­–ç•¥ - AIå‚æ•°å»ºè®® âœ…

**åˆå§‹çŠ¶æ€:**
- æ€»æ”¶ç›Šç‡: 0.00%
- èƒœç‡: 0.00%
- äº¤æ˜“æ¬¡æ•°: 0
- **é—®é¢˜**: å‚æ•°è®¾ç½®è¿‡äºä¸¥æ ¼ï¼Œå¯¼è‡´é›¶äº¤æ˜“

**AIå»ºè®® (ç½®ä¿¡åº¦: 0.85):**

1. **rsi_long_min**: 45.0 â†’ 30.0
   - åŸå› : å½“å‰RSIåšå¤šåŒºé—´è¿‡äºä¸¥æ ¼ï¼Œé™ä½ä¸‹é™å¯æ•æ‰æ›´å¤šè¶…å–åå¼¹æœºä¼š

2. **rsi_short_max**: 55.0 â†’ 70.0
   - åŸå› : åšç©ºåŒºé—´ä¸åšå¤šåŒºé—´å­˜åœ¨é‡å å†²çªï¼Œæé«˜ä¸Šé™å¯é¿å…å†²çª

3. **macd_signal_threshold**: 0.0 â†’ 0.02
   - åŸå› : å½“å‰é˜ˆå€¼ä¸º0è¿‡äºä¸¥æ ¼ï¼Œé€‚å½“æ”¾å®½å¯å‡å°‘å‡ä¿¡å·è¿‡æ»¤

4. **volume_ratio_min**: 1.2 â†’ 1.0
   - åŸå› : æˆäº¤é‡æ¯”ç‡è¦æ±‚è¿‡é«˜ï¼Œåœ¨éœ‡è¡è¡Œæƒ…ä¸­éš¾ä»¥æ»¡è¶³

5. **atr_pct_max**: 0.03 â†’ 0.05
   - åŸå› : ATRä¸Šé™3%å¯èƒ½è¿‡æ»¤æ‰è¿‡å¤šæ³¢åŠ¨æ€§æœºä¼š

**æ•´ä½“è¯„ä¼°:**
> å½“å‰ç­–ç•¥å‚æ•°è®¾ç½®è¿‡äºä¸¥æ ¼ï¼Œå¯¼è‡´é›¶äº¤æ˜“ã€‚ä¸»è¦é—®é¢˜åŒ…æ‹¬ï¼š1ï¼‰RSIå‚æ•°è®¾ç½®ä¸åˆç†ï¼Œå¤šç©ºåŒºé—´é‡å ä¸”èŒƒå›´è¿‡çª„ï¼›2ï¼‰å¤šä¸ªè¿‡æ»¤æ¡ä»¶åŒæ—¶è¿‡ä¸¥ï¼Œå½¢æˆå¤šé‡è¿‡æ»¤å¯¼è‡´æ— ä¿¡å·ï¼›3ï¼‰å‚æ•°é—´ç¼ºä¹åè°ƒæ€§ã€‚å»ºè®®ä¼˜å…ˆæ”¾å®½æ ¸å¿ƒå…¥åœºæ¡ä»¶ï¼ˆRSIã€MACDï¼‰ï¼Œå†è°ƒæ•´è¾…åŠ©è¿‡æ»¤å™¨ã€‚

---

### 2. Trendç­–ç•¥ - AIå‚æ•°å»ºè®® âœ…

**åˆå§‹çŠ¶æ€:**
- æ€»æ”¶ç›Šç‡: -19.40%
- èƒœç‡: 26.32%
- äº¤æ˜“æ¬¡æ•°: 19
- **é—®é¢˜**: ä¿¡å·è´¨é‡ä½ä¸‹ï¼Œé£é™©ç®¡ç†ä¸å½“

**AIå»ºè®® (ç½®ä¿¡åº¦: 0.75):**

1. **trend_strength_threshold**: 60.0 â†’ 75.0
   - åŸå› : èƒœç‡ä»…26.32%ï¼Œæé«˜é˜ˆå€¼å¯è¿‡æ»¤å¼±è¶‹åŠ¿ç¯å¢ƒä¸‹çš„è™šå‡ä¿¡å·

2. **atr_stop_loss_multiplier**: 2.0 â†’ 1.5
   - åŸå› : æ€»æ”¶ç›Šç‡-19.40%ï¼Œæ­¢æŸè®¾ç½®è¿‡å®½ï¼Œæ”¶ç´§æ­¢æŸå¯æ§åˆ¶å•ç¬”æœ€å¤§å›æ’¤

3. **atr_take_profit_multiplier**: 3.0 â†’ 2.0
   - åŸå› : èƒœç‡è¿‡ä½å¯¼è‡´æ­¢ç›ˆ/æ­¢æŸæ¯”ç‡æ— æ•ˆï¼Œé™ä½æ­¢ç›ˆç›®æ ‡å¯æ›´æ—©è·åˆ©äº†ç»“

4. **rsi_oversold**: 30.0 â†’ 25.0
   - åŸå› : åœ¨è¶‹åŠ¿ç­–ç•¥ä¸­ï¼ŒRSIåº”ä½œä¸ºæç«¯åè½¬çš„è¿‡æ»¤å™¨ï¼Œé™ä½é˜ˆå€¼å¯æé«˜ä¿¡å·è´¨é‡

5. **default_leverage**: 6 â†’ 3
   - åŸå› : ç­–ç•¥å¤„äºäºæŸçŠ¶æ€ä¸”èƒœç‡ä½ï¼Œé™ä½æ æ†æ˜¯é£é™©æ§åˆ¶çš„é¦–è¦æªæ–½

**æ•´ä½“è¯„ä¼°:**
> è¯¥ç­–ç•¥å½“å‰è¡¨ç°æå·®ï¼Œæ ¸å¿ƒé—®é¢˜æ˜¯ä¿¡å·è´¨é‡ä½ä¸‹ï¼ˆèƒœç‡26.32%ï¼‰å’Œé£é™©ç®¡ç†ä¸å½“ã€‚å»ºè®®ä¼˜å…ˆè°ƒæ•´è¶‹åŠ¿å¼ºåº¦é˜ˆå€¼å’Œæ­¢æŸå‚æ•°ä»¥æé«˜ä¿¡å·è´¨é‡ï¼ŒåŒæ—¶å¿…é¡»é™ä½æ æ†æ§åˆ¶é£é™©ã€‚

---

### 3. ç½‘æ ¼æœç´¢åŠŸèƒ½ âœ…

**Signalç­–ç•¥æµ‹è¯•:**
- å‚æ•°æœç´¢èŒƒå›´: `{'rsi_long_min': [40, 45, 50], 'rsi_long_max': [70, 75, 80]}`
- æ€»ç»„åˆæ•°: 9
- æœ€ä½³å‚æ•°: `{'rsi_long_min': 40, 'rsi_long_max': 70}`
- æœ€ä½³åˆ†æ•°: 0.0000

**Trendç­–ç•¥æµ‹è¯•:**
- å‚æ•°æœç´¢èŒƒå›´: `{'trend_strength_threshold': [55, 60, 65], 'default_size': [0.04, 0.05, 0.06]}`
- æ€»ç»„åˆæ•°: 9
- æœ€ä½³å‚æ•°: `{'trend_strength_threshold': 55, 'default_size': 0.04}`
- æœ€ä½³åˆ†æ•°: -13.7631
- æœ€ä½³ç»“æœ: æ”¶ç›Šç‡ -13.76%, èƒœç‡ 14.29%, äº¤æ˜“æ¬¡æ•° 7

---

### 4. æ··åˆä¼˜åŒ–åŠŸèƒ½ âœ…

**Signalç­–ç•¥:**
- âœ… æˆåŠŸè¿è¡Œåˆå§‹å›æµ‹
- âœ… æˆåŠŸè·å–AIå»ºè®®ï¼ˆ5æ¡ï¼‰
- âœ… ä¼˜åŒ–æµç¨‹å®Œæ•´æ‰§è¡Œ

**Trendç­–ç•¥:**
- âœ… æˆåŠŸè¿è¡Œåˆå§‹å›æµ‹
- âœ… æˆåŠŸè·å–AIå»ºè®®ï¼ˆ5æ¡ï¼‰
- âœ… ä¼˜åŒ–æµç¨‹å®Œæ•´æ‰§è¡Œ

---

## åŠŸèƒ½éªŒè¯

### âœ… ä»£ç è´¨é‡

1. **é”™è¯¯å¤„ç†**: å®Œå–„çš„é”™è¯¯å¤„ç†æœºåˆ¶
2. **APIé›†æˆ**: DeepSeek APIè°ƒç”¨æ­£å¸¸
3. **å‚æ•°éªŒè¯**: èƒ½å¤Ÿæ­£ç¡®éªŒè¯å’Œè¿‡æ»¤å‚æ•°
4. **é™çº§ç­–ç•¥**: AIä¸å¯ç”¨æ—¶èƒ½å¤Ÿä¼˜é›…é™çº§
5. **æ€§èƒ½ä¼˜åŒ–**: æ”¯æŒé™åˆ¶è¿­ä»£æ¬¡æ•°

### âœ… å®‰å…¨æ€§

1. **`.gitignore`é…ç½®**: âœ… æ­£ç¡®
   - `.env` æ–‡ä»¶å·²è¢«å¿½ç•¥
   - `git check-ignore .env` è¿”å› `.env`
   - `git status` ä¸æ˜¾ç¤º `.env` æ–‡ä»¶

2. **APIå¯†é’¥ä¿æŠ¤**: âœ… å®‰å…¨
   - APIå¯†é’¥å­˜å‚¨åœ¨ `.env` æ–‡ä»¶ä¸­
   - `.env` æ–‡ä»¶ä¸ä¼šè¢«æäº¤åˆ°git
   - ä»£ç ä¸­ä¸åŒ…å«ç¡¬ç¼–ç çš„å¯†é’¥

---

## AIå»ºè®®è´¨é‡åˆ†æ

### Signalç­–ç•¥å»ºè®®è´¨é‡: â­â­â­â­â­

- **å‡†ç¡®æ€§**: å‡†ç¡®è¯†åˆ«äº†é›¶äº¤æ˜“çš„æ ¹æœ¬åŸå› 
- **å¯æ“ä½œæ€§**: æä¾›äº†5æ¡å…·ä½“ã€å¯æ‰§è¡Œçš„å‚æ•°è°ƒæ•´å»ºè®®
- **é€»è¾‘æ€§**: å»ºè®®ä¹‹é—´æœ‰é€»è¾‘å…³è”ï¼Œå½¢æˆå®Œæ•´çš„ä¼˜åŒ–æ–¹æ¡ˆ
- **ç½®ä¿¡åº¦**: 0.85ï¼ˆé«˜ç½®ä¿¡åº¦ï¼‰

### Trendç­–ç•¥å»ºè®®è´¨é‡: â­â­â­â­

- **å‡†ç¡®æ€§**: å‡†ç¡®è¯†åˆ«äº†ä½èƒœç‡å’Œé«˜äºæŸçš„é—®é¢˜
- **å¯æ“ä½œæ€§**: æä¾›äº†5æ¡å…·ä½“å»ºè®®ï¼ŒåŒ…æ‹¬é£é™©æ§åˆ¶å»ºè®®
- **é€»è¾‘æ€§**: å»ºè®®ä¼˜å…ˆè°ƒæ•´å…³é”®å‚æ•°ï¼ˆè¶‹åŠ¿å¼ºåº¦ã€æ­¢æŸï¼‰
- **ç½®ä¿¡åº¦**: 0.75ï¼ˆä¸­ç­‰ç½®ä¿¡åº¦ï¼‰

---

## ä½¿ç”¨ç¤ºä¾‹

### 1. ä½¿ç”¨AIå»ºè®®

```python
from strategies import get_optimizer, StrategyRegistry
from trading_bots.config import deepseek_client
from scripts.backtest_runner import run_backtest_with_strategy
import pandas as pd

# åŠ è½½æ•°æ®
df = pd.read_json('data/backtest/data/test_data_15m_7d.json')

# è¿è¡Œåˆå§‹å›æµ‹
strategy_class = StrategyRegistry.get_strategy_class('signal')
initial_params = strategy_class().get_parameters()
initial_results = run_backtest_with_strategy(
    df=df,
    strategy_name='signal',
    strategy_params=initial_params
)

# è·å–AIå»ºè®®
optimizer = get_optimizer(ai_client=deepseek_client)
ai_result = optimizer.optimize_with_ai(
    strategy_class=strategy_class,
    backtest_results=initial_results,
    current_params=initial_params
)

# åº”ç”¨AIå»ºè®®
if ai_result.get('success'):
    for suggestion in ai_result['suggestions']:
        param_name = suggestion['parameter']
        suggested_value = suggestion['suggested_value']
        print(f"å»ºè®®è°ƒæ•´ {param_name}: {suggested_value}")
```

### 2. ä½¿ç”¨æ··åˆä¼˜åŒ–

```python
from strategies import get_optimizer, StrategyRegistry
from trading_bots.config import deepseek_client
import pandas as pd

df = pd.read_json('data/backtest/data/test_data_15m_7d.json')
optimizer = get_optimizer(ai_client=deepseek_client)
strategy_class = StrategyRegistry.get_strategy_class('trend')

result = optimizer.hybrid_optimize(
    strategy_class=strategy_class,
    df=df,
    initial_params={'trend_strength_threshold': 60.0}
)

print(f"ä¼˜åŒ–åå‚æ•°: {result['best_params']}")
print(f"æ”¹è¿›: æ”¶ç›Šç‡ {result['improvement']['return']:+.2f}%")
```

---

## ç»“è®º

### âœ… æ‰€æœ‰åŠŸèƒ½å®Œå…¨æ­£å¸¸

1. **AIå‚æ•°å»ºè®®**: âœ… å®Œå…¨æ­£å¸¸
   - èƒ½å¤Ÿå‡†ç¡®åˆ†æå›æµ‹ç»“æœ
   - æä¾›é«˜è´¨é‡çš„å‚æ•°ä¼˜åŒ–å»ºè®®
   - å»ºè®®å…·æœ‰å¯æ“ä½œæ€§å’Œé€»è¾‘æ€§

2. **ç½‘æ ¼æœç´¢**: âœ… å®Œå…¨æ­£å¸¸
   - èƒ½å¤Ÿæ­£ç¡®éå†å‚æ•°ç»„åˆ
   - èƒ½å¤Ÿæ‰¾åˆ°æœ€ä½³å‚æ•°ç»„åˆ
   - æ€§èƒ½è¡¨ç°è‰¯å¥½

3. **æ··åˆä¼˜åŒ–**: âœ… å®Œå…¨æ­£å¸¸
   - AIå»ºè®®å’Œç½‘æ ¼æœç´¢å®Œç¾ç»“åˆ
   - èƒ½å¤Ÿæä¾›æ›´å¥½çš„ä¼˜åŒ–æ•ˆæœ
   - é”™è¯¯å¤„ç†å®Œå–„

4. **å®‰å…¨æ€§**: âœ… å®Œå…¨ä¿éšœ
   - `.gitignore` é…ç½®æ­£ç¡®
   - APIå¯†é’¥ä¸ä¼šè¢«æ³„éœ²
   - ä»£ç ä¸­æ— ç¡¬ç¼–ç å¯†é’¥

### ğŸ‰ ç³»ç»Ÿå·²å®Œå…¨å°±ç»ª

AIå›æµ‹å‚æ•°ä¼˜åŒ–åŠŸèƒ½å·²å®Œå…¨å®ç°å¹¶é€šè¿‡æµ‹è¯•ï¼Œå¯ä»¥æŠ•å…¥ç”Ÿäº§ä½¿ç”¨ï¼

---

## æµ‹è¯•å‘½ä»¤

```bash
# è¿è¡Œå®Œæ•´æµ‹è¯•
python test_ai_optimization.py

# éªŒè¯.gitignoreé…ç½®
git check-ignore .env
git status .env

# éªŒè¯APIå¯†é’¥é…ç½®ï¼ˆä¸æ˜¾ç¤ºå¯†é’¥å†…å®¹ï¼‰
python -c "from dotenv import load_dotenv; import os; load_dotenv(); print('âœ… APIå¯†é’¥å·²é…ç½®' if os.getenv('DEEPSEEK_API_KEY') else 'âŒ æœªé…ç½®')"
```
